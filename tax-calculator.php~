<?php

/**
 * Plugin Name: Tax Calculator
 * Plugin URI: http://www.emonx.com
 * Description: This plugin is for Tax Calculator.
 * Version: 1.0
 * Author: Muhammad Ilyas
 * Author URI: http://www.emonx.com
 * License: GPL2
 */
?>
<?php

// create shortcode to Display tax_calculator
add_shortcode( 'tax-calculator', 'tax_calculator' );
function tax_calculator( $atts ) {
?>
<section>

    <div class="calculator-div">
        <h2>Tax Calculator</h2>
        <div id="pricecal">
            <!--<h1>Price Calculator </h1>-->
            <form name="pricecal1">
                <div style="border:1px dotted #fff; margin-top:5px; padding:5px;">
                    <label></label><input type="text" name="area1" id="area1" placeholder="Enter your salary here" class="cal1" onkeyup="pricecal()"; value="1"> <br>
                </div>
            </form>
            <h6>
                Monthly Income:<div id="priceresult" style=""></div>
            </h6>
            <h6>
                Tax:
                <div id="tax"></div>
            </h6>
            <h6>
                Remaining Salary:
                <div id="remainingSalary"></div>
            </h6>
            <h6>
                Yearly Salary:
                <div id="yearlySalary"></div>
            </h6>
            <h6>
                Yearly Tax:
                <div id="yearlyTax"></div>
            </h6>
            <h6>
                Yearly Salary after Tax:
                <div id="yearlySalaryAfterTax"></div>
            </h6>



        </div>
    </div>



    <?php }
    function tax_calculator_script() {?>


        <!--calculator=========-->
        <script type="text/javascript">

            function pricecal(){
                var str=pricecal1.area1.value;
                str=str.slice(-1);
                if(isNaN(str)==true){
                    alert("Enter only numeric values");
                    str=str.slice(0, -1);
                    pricecal1.area1.value;
                    return false;
                }
                var parea=parseFloat(pricecal1.area1.value);
                //var prate=parseFloat(pricecal1.rate1.value);
                var salary=parea.toFixed(2);
                var tax = 0;
                if(salary<400000){
                    tax=0;
                }
                else if(500000>salary<400000){
                    tax = (salary-400000)*0.02;
                }
                else if(750000>salary<500000){
                    tax = 2000+(salary-500000)*0.05;
                }
                else if(1400000>salary<750000){
                    tax = 14500+(salary-750000)*0.1;
                }
                else if(1500000>salary<1400000){
                    tax = 79500+(salary-1400000)*0.12;
                }
                else if(1800000>salary<1500000){
                    tax = 92000+(salary-1500000)*0.15;
                }
                else if(2500000>salary<1800000){
                    tax = 137000+(salary-1800000)*0.175;
                }
                else if(3000000>salary<2500000){
                    tax = 259500+(salary-2500000)*0.2;
                }
                else if(3500000>salary<3000000){
                    tax = 359500+(salary-3000000)*0.22;
                }
                else if(4000000>salary<3500000){
                    tax = 472000+(salary-3500000)*0.25;
                }
                else if(7000000>salary<4000000){
                    tax = 597000+(salary-4000000)*0.27;
                }
                else if(salary<7000000){
                    tax = 1422000+((salary-7000000)*0.3);
                }

                document.getElementById('priceresult').innerHTML=salary;
                document.getElementById('tax').innerHTML=tax;
                document.getElementById('remainingSalary').innerHTML=salary-tax;
                document.getElementById('yearlySalary').innerHTML=salary*12;
                document.getElementById('yearlyTax').innerHTML=tax*12;
                document.getElementById('yearlySalaryAfterTax').innerHTML=(salary*12)-(tax*12);

            }
        </script>


    <?php }
    // Add hook for front-end <head></head>
    add_action('wp_head', 'tax_calculator_script');

    add_action('wp_footer', 'tax_calculator_scripts');
    function tax_calculator_scripts() {
        if (!is_admin()) {
            wp_enqueue_script( 'jquery' );
        }
    }
    ?>
